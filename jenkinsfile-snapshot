#!/usr/bin/env groovy

// Use node dedicated to Java compilation
pipeline {
    agent any

    def mailRecipients = 'adnene.hamdouni@qugenx.com,adnene.hamdouni@gmail.com'

    stages {

        // Clean workspace
        stage('Clean workspace') {
            deleteDir()
        }
        // Download source code
        stage('Preparation') {
            checkout scm
        }

        // Launch Maven
        stage('Build') {
            def common = load("${pwd()}/jenkinsfile-common")
            common.mavenTask("clean install deploy")

            // Tell Mailer that it's a success
            currentBuild.result = 'SUCCESS'
        }

    }

}
