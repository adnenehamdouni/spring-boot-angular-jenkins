#!/usr/bin/env groovy

def mavenTask(String command) {
    def MAVEN_BUILD=tool 'Maven_3.0.4'
    def JAVA_HOME=tool 'JDK_1.8.0_121'
    def NODE_HOME=tool 'NodeJs_10.16.3'

    if (isUnix()) {
        sh "'${MAVEN_BUILD}/bin/mvn' -e -U -B -X  ${command}"
    } else {
        withEnv(["JAVA_HOME=${JAVA_HOME}",
                 "PATH=${NODE_HOME};${env.PATH};${WORKSPACE}/spring-boot-angular-jenkins-web/node-modules/.bin"]) {
            bat (/"${MAVEN_BUILD}\bin\mvn.bat" -e -U -B ${command}/)
        }
    }
}

return this